/*
 *  Copyright 2017 Regents of the University of California.
 *
 *  Licensed under the Educational Community License, Version 2.0 (the "license");
 *  you may not use this file except in compliance with the License. You may
 *  obtain a copy of the license at
 *
 *  https://opensource.org/licenses/ECL-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
package org.opentestsystem.ap.ims.model;

import com.fasterxml.jackson.annotation.JsonSubTypes;
import com.fasterxml.jackson.annotation.JsonTypeInfo;
import lombok.Data;
import org.opentestsystem.saaif.item.ItemRelease;


@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXISTING_PROPERTY, property = "type")
@JsonSubTypes({
    @JsonSubTypes.Type(value = SaItem.class, name = "sa"),
    @JsonSubTypes.Type(value = WerItem.class, name = "wer")
})
@Data
public abstract class Item {

    private String id;

    private String beingCreatedBy;

    private String beingEditedBy;

    public Item(final String id) {
        this.id = id;
    }

    // ------------------------------------------------------------------------

    public abstract String getType();

    public abstract ItemRelease toSaaif();

    /**
     * Creates a new saaif item using saaif item passed in as the base.  The model properties are copied
     * over to the new object, effectively updating it.
     *
     * @param saaifItem The saaif item as the base of the new instance.
     * @return A new instance of the saaif item updated with the model properties.
     */
    public abstract ItemRelease toSaaif(ItemRelease saaifItem);

    /**
     * Copies the values of the saaif item to the properties of the model.
     *
     * @param saaifItem The saaif item to copy properties from.
     */
    public abstract void fromSaaif(ItemRelease saaifItem);

    // ------------------------------------------------------------------------
}
